<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.prod.dao.ProdDAO">
	<!-- 수동 맵핑 설정 -->
	<!-- type="ProdVO" : 최종 반환 타입 -->
	<!-- autoMapping="true" : 단순 컬럼의 내용은 자동 바인딩 -->
	<!-- association :  연관관계, vo멤버변수와 vo멤버변수에 해당하는 VO 수동 연결 -->
	<resultMap type="ProdVO" id="prodMap" autoMapping="true">
		<association property="buyer" javaType="BuyerVO" autoMapping="true" />
		<association property="lprod" javaType="LprodVO" autoMapping="true" />
	</resultMap>
	
	<select id="selectProdList" resultMap="prodMap">
		SELECT
			  PROD.PROD_ID /* 상품코드 */
			, PROD.PROD_BUYER /* 거래처 */
			, PROD.PROD_LGU /* 상품분류 */
			, PROD.PROD_NAME /* 상품명 */
			, PROD.PROD_COST /* 구매가 */
			, PROD.PROD_PRICE /* 판매가 */
			, PROD.PROD_MILEAGE /* 마일리지 */
			, PROD.PROD_INSDATE /* 입고일 */
		    , BUYER.BUYER_NAME /* 거래처명 */
		    , LPROD.LPROD_NM /* 분류명 */
		FROM PROD
		INNER JOIN BUYER ON (PROD.PROD_BUYER = BUYER.BUYER_ID)
		INNER JOIN LPROD ON (PROD.PROD_LGU = LPROD.LPROD_GU)
	</select>
	
	<resultMap type="ProdVO" id="prodMapAllData" autoMapping="true">
		<association property="buyer" javaType="BuyerVO" autoMapping="true" />
		<association property="lprod" javaType="LprodVO" autoMapping="true" />
	</resultMap>
	<select id="selectProd" resultMap="prodMapAllData" parameterType="String">
		SELECT
			  PROD.PROD_ID /* 상품코드 */
			, PROD.PROD_NAME /* 상품명 */
			, PROD.PROD_LGU /* 상품분류 */
			, PROD.PROD_BUYER /* 거래처 */
			, PROD.PROD_COST /* 구매가 */
			, PROD.PROD_PRICE /* 판매가 */
			, PROD.PROD_SALE /* 세일가 */
			, PROD.PROD_OUTLINE /* 요약정보 */
			, PROD.PROD_DETAIL /* 상세정보 */
			, PROD.PROD_IMG /* 이미지 */
			, PROD.PROD_TOTALSTOCK /* 총재고 */
			, PROD.PROD_INSDATE /* 입고일 */
			, PROD.PROD_PROPERSTOCK /* 적정재고 */
			, PROD.PROD_SIZE /* 크기 */
			, PROD.PROD_COLOR /* 색상 */
			, PROD.PROD_DELIVERY /* 배송방법 */
			, PROD.PROD_UNIT /* 단위 */
			, PROD.PROD_QTYIN /* 입고량 */
			, PROD.PROD_QTYSALE /* 출고량 */
			, PROD.PROD_MILEAGE /* 마일리지 */
			, BUYER.BUYER_ID /* 거래처아이디 */
			, BUYER.BUYER_NAME /* 거래처명 */
			, BUYER.BUYER_LGU /* 거래처코드 */
			, BUYER.BUYER_BANK /* 은행명 */
			, BUYER.BUYER_BANKNO /* 계좌번호 */
			, BUYER.BUYER_BANKNAME /* 예금주명 */
			, BUYER.BUYER_ZIP /* 우편번호 */
			, BUYER.BUYER_ADD1 /* 기본주소 */
			, BUYER.BUYER_ADD2 /* 상세주소 */
			, BUYER.BUYER_COMTEL /* 회사전화번호 */
			, BUYER.BUYER_FAX /* 팩스번호 */
			, BUYER.BUYER_MAIL /* 이메일 */
			, BUYER.BUYER_CHARGER /* 담당자 */
			, BUYER.BUYER_TELEXT /* 전화번호? */
			, LPROD.LPROD_ID /* 상품순번 */
			, LPROD.LPROD_GU /* 상품분류코드 */
			, LPROD.LPROD_NM /* 상품분류명 */
		FROM PROD
		INNER JOIN BUYER ON (PROD.PROD_BUYER = BUYER.BUYER_ID)
		INNER JOIN LPROD ON (PROD.PROD_LGU = LPROD.LPROD_GU)
		WHERE 1=1
		AND PROD.PROD_ID = #{prodId}
	</select>
</mapper>