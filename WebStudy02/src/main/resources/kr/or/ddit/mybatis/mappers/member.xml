<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.member.dao.MemberDAO"><!-- dao인터페이스의 퀄러파이드네임 따라가기 -->
	<select id="selectMemberList" resultType="MemberVO"  ><!-- statementType="CALLABLE" -->
		SELECT 
			MEM_ID memId 
			, MEM_NAME 
			, MEM_ADD1 
			, MEM_ADD2 
			, MEM_HP 
			, MEM_MAIL 
			, MEM_MILEAGE 
		FROM MEMBER
	</select>
	
	
	<select id="selectMember" resultType="MemberVO" parameterType="String"><!-- 빌트인alias 만히사용하는거 등록해놈 -->
		SELECT
			MEM_ID
			, MEM_PASS
			, MEM_NAME
			, MEM_REGNO1
			, MEM_REGNO2
			, TO_CHAR(mem_BIR, 'yyyy-mm-dd') AS MEM_BIR
			, MEM_ZIP
			, MEM_ADD1
			, MEM_ADD2
			, MEM_HOMETEL
			, MEM_COMTEL
			, MEM_HP
			, MEM_MAIL
			, MEM_JOB
			, MEM_LIKE
			, MEM_MEMORIAL
			, TO_CHAR(mem_MEMORIALDAY, 'yyyy-mm-dd') AS MEM_MEMORIALDAY
			, MEM_MILEAGE
			, MEM_DELETE
		FROM MEMBER
		WHERE MEM_ID = #{memId}
	</select>
	
	<insert id="insertMember" parameterType="MemberVO">
		INSERT INTO member (
		     MEM_ID
		    ,MEM_PASS
		    ,MEM_NAME
		    ,MEM_REGNO1
		    ,MEM_REGNO2
		    ,MEM_BIR
		    ,MEM_ZIP
		    ,MEM_ADD1
		    ,MEM_ADD2
		    ,MEM_HOMETEL
		    ,MEM_COMTEL
		    ,MEM_HP
		    ,MEM_MAIL
		    ,MEM_JOB
		    ,MEM_LIKE
		    ,MEM_MEMORIAL
		    ,MEM_MEMORIALDAY
		    ,MEM_MILEAGE
		) VALUES (
		      #{memId, jdbcType=VARCHAR}<!-- #{memId} -> member.getMemId() : 자바코드로 변경될때 getter로 바뀐다. -->
			, #{memPass, jdbcType=VARCHAR}
			, #{memName, jdbcType=VARCHAR}
			, #{memRegno1, jdbcType=CHAR}
			, #{memRegno2, jdbcType=CHAR}
			, #{memBir, jdbcType=DATE}
			, #{memZip, jdbcType=CHAR}
			, #{memAdd1, jdbcType=VARCHAR}
			, #{memAdd2, jdbcType=VARCHAR}
			, #{memHometel, jdbcType=VARCHAR}
			, #{memComtel, jdbcType=VARCHAR}
			, #{memHp, jdbcType=VARCHAR}
			, #{memMail, jdbcType=VARCHAR}
			, #{memJob, jdbcType=VARCHAR}
			, #{memLike, jdbcType=VARCHAR}
			, #{memMemorial, jdbcType=VARCHAR}
			, #{memMemorialday, jdbcType=DATE}
			, 3000
		)
	</insert>
	
	
	<update id="update" parameterType="MemberVO">
		UPDATE MEMBER
		SET 
			  MEM_PASS = #{memPass, jdbcType=VARCHAR}
			, MEM_NAME = #{memName, jdbcType=VARCHAR}
			, MEM_REGNO1 = #{memRegno1, jdbcType=CHAR}
			, MEM_REGNO2 = #{memRegno2, jdbcType=CHAR}
			, MEM_BIR = #{memBir, jdbcType=DATE}
			, MEM_ZIP = #{memZip, jdbcType=CHAR}
			, MEM_ADD1 = #{memAdd1, jdbcType=VARCHAR}
			, MEM_ADD2 = #{memAdd2, jdbcType=VARCHAR}
			, MEM_HOMETEL = #{memHometel, jdbcType=VARCHAR}
			, MEM_COMTEL = #{memComtel, jdbcType=VARCHAR}
			, MEM_HP = #{memHp, jdbcType=VARCHAR}
			, MEM_MAIL = #{memMail, jdbcType=VARCHAR}
			, MEM_JOB = #{memJob, jdbcType=VARCHAR}
			, MEM_LIKE = #{memLike, jdbcType=VARCHAR}
			, MEM_MEMORIAL = #{memMemorial, jdbcType=VARCHAR}
			, MEM_MEMORIALDAY = #{memMemorialday, jdbcType=DATE}
			, MEM_MILEAGE = #{memMileage, jdbcType=NUMERIC}
			, MEM_DELETE = #{memDelete, jdbcType=VARCHAR}
		WHERE MEM_ID = #{memId}
	</update>
	
	<update id="delete" parameterType="String">
		UPDATE MEMBER
		SET
			MEM_DELETE = 'T'
		WHERE MEM_ID = #{memId}
	</update>
</mapper>
